import { Component } from '@angular/core';
import { BaseComponent } from '../base-component/base-component.component';
import * as i0 from "@angular/core";
import * as i1 from "primeng/dynamicdialog";
import * as i2 from "angular-l10n";
import * as i3 from "primeng/button";
import * as i4 from "primeng/api";
import * as i5 from "primeng/panel";
import * as i6 from "primeng/table";
import * as i7 from "../text-input/text-input.component";
import * as i8 from "../org-tree/org-tree.component";
import * as i9 from "@angular/common";
export class OrgSelectorDialogComponent extends BaseComponent {
    constructor(_injector, dialogService, translate, 
    // public orgService: OrganizationService,
    dynamicDialogRef, config) {
        super(_injector);
        this._injector = _injector;
        this.dialogService = dialogService;
        this.translate = translate;
        this.dynamicDialogRef = dynamicDialogRef;
        this.config = config;
        this.formConfig = {
            id: [''],
            code: [''],
            name: [''],
        };
        this.dataTable = {};
        this.selectedOrg = null;
        this.formSearch = this.buildForm({}, this.formConfig);
        this.orgService = this.config.data?.orgService;
        this.doSearchOrg();
    }
    doSearchOrg(event) {
        if (!event) {
            event = { rows: 10, resetTable: true };
        }
        this.orgService.search(this.formSearch.value, event)
            .subscribe((res) => {
            this.dataTable = res?.data || [];
        });
    }
    onRowSelect(event) {
        if (!!event.data) {
            this.dynamicDialogRef.close(event.data);
        }
    }
    onSelectNode(event) {
        console.log(' >>> onSelectNode', event);
        this.f['id'].setValue(event.key);
        this.doSearchOrg();
    }
    get f() {
        return this.formSearch.controls;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.5", ngImport: i0, type: OrgSelectorDialogComponent, deps: [{ token: i0.Injector }, { token: i1.DialogService }, { token: i2.L10nTranslationService }, { token: i1.DynamicDialogRef }, { token: i1.DynamicDialogConfig }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.5", type: OrgSelectorDialogComponent, selector: "app-org-selector-dialog", usesInheritance: true, ngImport: i0, template: "<div class=\"grid\">\r\n    <div class=\"md:col-4 col-12\">\r\n        <p-panel>\r\n            <ng-template pTemplate=\"header\" class=\"block\">\r\n                <div class=\"flex justify-content-between flex-wrap\">\r\n                    <b class=\"flex align-items-center\">{{ 'mngOrganization.organization.treeTitle' | translateAsync\r\n                        }}</b>\r\n                </div>\r\n            </ng-template>\r\n            <div>\r\n                <app-org-tree (onSelectNode)=\"onSelectNode($event)\" [orgService]=\"orgService\"/>\r\n            </div>\r\n        </p-panel>\r\n    </div>\r\n    <div class=\"md:col-8 col-12\">\r\n        <div class=\"grid\">\r\n            <app-text-input class=\"mr-3 md:col-8 col-12\" [placeholder]=\"'\u0110\u01A1n v\u1ECB'\" [property]=\"f['name']\"></app-text-input>\r\n            <p-button icon=\"pi pi-search\" class=\"md:col-3 col-12\" [label]=\"'common.label.search' | translateAsync\" (onClick)=\"doSearchOrg()\"></p-button>\r\n        </div>\r\n        <div>\r\n            <p-table [value]=\"dataTable?.data\" [paginator]=\"dataTable?.data && dataTable?.data?.length\" [rows]=\"10\"\r\n                styleClass=\"p-datatable-sm\" [lazy]=\"true\" [totalRecords]=\"dataTable?.recordsTotal\"\r\n                (onLazyLoad)=\"doSearchOrg($event)\"\r\n                [showCurrentPageReport]=\"true\"\r\n                selectionMode=\"single\"\r\n                (onRowSelect)=\"onRowSelect($event)\"\r\n                currentPageReportTemplate=\"T\u00ECm th\u1EA5y {totalRecords} k\u1EBFt qu\u1EA3, hi\u1EC3n th\u1ECB t\u1EEB {first} - {last}\">\r\n                <ng-template pTemplate=\"header\">\r\n                    <tr>\r\n                        <th style=\"width: 5%;\">STT</th>\r\n                        <th style=\"width: 15%\">\r\n                            {{ 'mngOrganization.organization.code' | translateAsync }}\r\n                        </th>\r\n                        <th style=\"width: 30%\">\r\n                            {{ 'mngOrganization.organization.name' | translateAsync }}\r\n                        </th>\r\n                        <th style=\"width: 20%\">\r\n                            {{ 'mngOrganization.organization.establishDate' | translateAsync }}\r\n                        </th>\r\n                    </tr>\r\n                </ng-template>\r\n                <ng-template pTemplate=\"body\" let-item let-index=\"rowIndex\">\r\n                    <tr [pSelectableRow]=\"item\">\r\n                        <td><span class=\"p-column-title\">STT</span>{{ index + 1 }}</td>\r\n                        <td><span class=\"p-column-title\">{{ 'mngOrganization.organization.code' | translateAsync }}</span>{{ item.code }}</td>\r\n                        <td><span class=\"p-column-title\">{{ 'mngOrganization.organization.name' | translateAsync }}</span>{{ item.name }}</td>\r\n                        <td><span class=\"p-column-title\">{{ 'mngOrganization.organization.establishDate' | translateAsync }}</span>{{ item.establishDate | date:'dd/MM/yyyy' }}</td>\r\n                    </tr>\r\n                </ng-template>\r\n                <ng-template pTemplate=\"emptymessage\">\r\n                    <tr>\r\n                        <td colspan=\"6\">{{ 'common.table.dataNotFound' | translateAsync }}</td>\r\n                    </tr>\r\n                </ng-template>\r\n            </p-table>\r\n        </div>\r\n    </div>\r\n</div>", styles: ["::ng-deep app-org-selector-dialog .p-panel .p-panel-content{padding:0}\n"], dependencies: [{ kind: "component", type: i3.Button, selector: "p-button", inputs: ["type", "iconPos", "icon", "badge", "label", "disabled", "loading", "loadingIcon", "style", "styleClass", "badgeClass", "ariaLabel"], outputs: ["onClick", "onFocus", "onBlur"] }, { kind: "directive", type: i4.PrimeTemplate, selector: "[pTemplate]", inputs: ["type", "pTemplate"] }, { kind: "component", type: i5.Panel, selector: "p-panel", inputs: ["toggleable", "header", "collapsed", "style", "styleClass", "iconPos", "expandIcon", "collapseIcon", "showHeader", "toggler", "transitionOptions"], outputs: ["collapsedChange", "onBeforeToggle", "onAfterToggle"] }, { kind: "component", type: i6.Table, selector: "p-table", inputs: ["frozenColumns", "frozenValue", "style", "styleClass", "tableStyle", "tableStyleClass", "paginator", "pageLinks", "rowsPerPageOptions", "alwaysShowPaginator", "paginatorPosition", "paginatorStyleClass", "paginatorDropdownAppendTo", "paginatorDropdownScrollHeight", "currentPageReportTemplate", "showCurrentPageReport", "showJumpToPageDropdown", "showJumpToPageInput", "showFirstLastIcon", "showPageLinks", "defaultSortOrder", "sortMode", "resetPageOnSort", "selectionMode", "selectionPageOnly", "contextMenuSelection", "contextMenuSelectionMode", "dataKey", "metaKeySelection", "rowSelectable", "rowTrackBy", "lazy", "lazyLoadOnInit", "compareSelectionBy", "csvSeparator", "exportFilename", "filters", "globalFilterFields", "filterDelay", "filterLocale", "expandedRowKeys", "editingRowKeys", "rowExpandMode", "scrollable", "scrollDirection", "rowGroupMode", "scrollHeight", "virtualScroll", "virtualScrollItemSize", "virtualScrollOptions", "virtualScrollDelay", "frozenWidth", "responsive", "contextMenu", "resizableColumns", "columnResizeMode", "reorderableColumns", "loading", "loadingIcon", "showLoader", "rowHover", "customSort", "showInitialSortBadge", "autoLayout", "exportFunction", "exportHeader", "stateKey", "stateStorage", "editMode", "groupRowsBy", "groupRowsByOrder", "responsiveLayout", "breakpoint", "paginatorLocale", "value", "columns", "first", "rows", "totalRecords", "sortField", "sortOrder", "multiSortMeta", "selection", "selectAll", "virtualRowHeight"], outputs: ["contextMenuSelectionChange", "selectAllChange", "selectionChange", "onRowSelect", "onRowUnselect", "onPage", "onSort", "onFilter", "onLazyLoad", "onRowExpand", "onRowCollapse", "onContextMenuSelect", "onColResize", "onColReorder", "onRowReorder", "onEditInit", "onEditComplete", "onEditCancel", "onHeaderCheckboxToggle", "sortFunction", "firstChange", "rowsChange", "onStateSave", "onStateRestore"] }, { kind: "directive", type: i6.SelectableRow, selector: "[pSelectableRow]", inputs: ["pSelectableRow", "pSelectableRowIndex", "pSelectableRowDisabled"] }, { kind: "component", type: i7.TextInputComponent, selector: "app-text-input", inputs: ["property", "wrapClass", "type", "maxLength", "rows", "labelValue", "placeholder", "autofocus", "disabled", "required", "readonly"], outputs: ["onChange", "onBlur"] }, { kind: "component", type: i8.OrgTreeComponent, selector: "app-org-tree", inputs: ["orgService"], outputs: ["onSelectNode"] }, { kind: "pipe", type: i9.DatePipe, name: "date" }, { kind: "pipe", type: i2.L10nTranslateAsyncPipe, name: "translateAsync" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.5", ngImport: i0, type: OrgSelectorDialogComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-org-selector-dialog', template: "<div class=\"grid\">\r\n    <div class=\"md:col-4 col-12\">\r\n        <p-panel>\r\n            <ng-template pTemplate=\"header\" class=\"block\">\r\n                <div class=\"flex justify-content-between flex-wrap\">\r\n                    <b class=\"flex align-items-center\">{{ 'mngOrganization.organization.treeTitle' | translateAsync\r\n                        }}</b>\r\n                </div>\r\n            </ng-template>\r\n            <div>\r\n                <app-org-tree (onSelectNode)=\"onSelectNode($event)\" [orgService]=\"orgService\"/>\r\n            </div>\r\n        </p-panel>\r\n    </div>\r\n    <div class=\"md:col-8 col-12\">\r\n        <div class=\"grid\">\r\n            <app-text-input class=\"mr-3 md:col-8 col-12\" [placeholder]=\"'\u0110\u01A1n v\u1ECB'\" [property]=\"f['name']\"></app-text-input>\r\n            <p-button icon=\"pi pi-search\" class=\"md:col-3 col-12\" [label]=\"'common.label.search' | translateAsync\" (onClick)=\"doSearchOrg()\"></p-button>\r\n        </div>\r\n        <div>\r\n            <p-table [value]=\"dataTable?.data\" [paginator]=\"dataTable?.data && dataTable?.data?.length\" [rows]=\"10\"\r\n                styleClass=\"p-datatable-sm\" [lazy]=\"true\" [totalRecords]=\"dataTable?.recordsTotal\"\r\n                (onLazyLoad)=\"doSearchOrg($event)\"\r\n                [showCurrentPageReport]=\"true\"\r\n                selectionMode=\"single\"\r\n                (onRowSelect)=\"onRowSelect($event)\"\r\n                currentPageReportTemplate=\"T\u00ECm th\u1EA5y {totalRecords} k\u1EBFt qu\u1EA3, hi\u1EC3n th\u1ECB t\u1EEB {first} - {last}\">\r\n                <ng-template pTemplate=\"header\">\r\n                    <tr>\r\n                        <th style=\"width: 5%;\">STT</th>\r\n                        <th style=\"width: 15%\">\r\n                            {{ 'mngOrganization.organization.code' | translateAsync }}\r\n                        </th>\r\n                        <th style=\"width: 30%\">\r\n                            {{ 'mngOrganization.organization.name' | translateAsync }}\r\n                        </th>\r\n                        <th style=\"width: 20%\">\r\n                            {{ 'mngOrganization.organization.establishDate' | translateAsync }}\r\n                        </th>\r\n                    </tr>\r\n                </ng-template>\r\n                <ng-template pTemplate=\"body\" let-item let-index=\"rowIndex\">\r\n                    <tr [pSelectableRow]=\"item\">\r\n                        <td><span class=\"p-column-title\">STT</span>{{ index + 1 }}</td>\r\n                        <td><span class=\"p-column-title\">{{ 'mngOrganization.organization.code' | translateAsync }}</span>{{ item.code }}</td>\r\n                        <td><span class=\"p-column-title\">{{ 'mngOrganization.organization.name' | translateAsync }}</span>{{ item.name }}</td>\r\n                        <td><span class=\"p-column-title\">{{ 'mngOrganization.organization.establishDate' | translateAsync }}</span>{{ item.establishDate | date:'dd/MM/yyyy' }}</td>\r\n                    </tr>\r\n                </ng-template>\r\n                <ng-template pTemplate=\"emptymessage\">\r\n                    <tr>\r\n                        <td colspan=\"6\">{{ 'common.table.dataNotFound' | translateAsync }}</td>\r\n                    </tr>\r\n                </ng-template>\r\n            </p-table>\r\n        </div>\r\n    </div>\r\n</div>", styles: ["::ng-deep app-org-selector-dialog .p-panel .p-panel-content{padding:0}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.Injector }, { type: i1.DialogService }, { type: i2.L10nTranslationService }, { type: i1.DynamicDialogRef }, { type: i1.DynamicDialogConfig }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JnLXNlbGVjdG9yLWRpYWxvZy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hbmd1bGFyeC1zY29yZS9zcmMvbGliL3NoYXJlZC9jb21wb25lbnRzL29yZy1zZWxlY3Rvci1kaWFsb2cvb3JnLXNlbGVjdG9yLWRpYWxvZy5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hbmd1bGFyeC1zY29yZS9zcmMvbGliL3NoYXJlZC9jb21wb25lbnRzL29yZy1zZWxlY3Rvci1kaWFsb2cvb3JnLXNlbGVjdG9yLWRpYWxvZy5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFZLE1BQU0sZUFBZSxDQUFDO0FBR3BELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw0Q0FBNEMsQ0FBQzs7Ozs7Ozs7Ozs7QUFTM0UsTUFBTSxPQUFPLDBCQUEyQixTQUFRLGFBQWE7SUFVM0QsWUFDVSxTQUFtQixFQUNwQixhQUE0QixFQUM1QixTQUFpQztJQUN4QywwQ0FBMEM7SUFDbkMsZ0JBQWtDLEVBQ2xDLE1BQTJCO1FBRWxDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztRQVBULGNBQVMsR0FBVCxTQUFTLENBQVU7UUFDcEIsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFDNUIsY0FBUyxHQUFULFNBQVMsQ0FBd0I7UUFFakMscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUNsQyxXQUFNLEdBQU4sTUFBTSxDQUFxQjtRQWZwQyxlQUFVLEdBQUc7WUFDWCxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDUixJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDVixJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUM7U0FDWCxDQUFDO1FBQ0YsY0FBUyxHQUFRLEVBQUUsQ0FBQztRQUNwQixnQkFBVyxHQUFHLElBQUksQ0FBQztRQVlqQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQztRQUMvQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUVELFdBQVcsQ0FBQyxLQUFXO1FBQ3JCLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDVixLQUFLLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsQ0FBQztTQUN4QztRQUNELElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQzthQUNqRCxTQUFTLENBQUMsQ0FBQyxHQUFRLEVBQUUsRUFBRTtZQUN0QixJQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ25DLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELFdBQVcsQ0FBQyxLQUFVO1FBQ3BCLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUU7WUFDaEIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDekM7SUFDSCxDQUFDO0lBRUQsWUFBWSxDQUFDLEtBQVU7UUFDckIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUN2QyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDakMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ3JCLENBQUM7SUFFRCxJQUFJLENBQUM7UUFDSCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDO0lBQ2xDLENBQUM7OEdBaERVLDBCQUEwQjtrR0FBMUIsMEJBQTBCLHNGQ1p2QyxvNEdBeURNOzsyRkQ3Q08sMEJBQTBCO2tCQUx0QyxTQUFTOytCQUNFLHlCQUF5QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5qZWN0b3IgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTDEwblRyYW5zbGF0aW9uU2VydmljZSB9IGZyb20gJ2FuZ3VsYXItbDEwbic7XHJcbmltcG9ydCB7IERpYWxvZ1NlcnZpY2UsIER5bmFtaWNEaWFsb2dDb25maWcsIER5bmFtaWNEaWFsb2dSZWYgfSBmcm9tICdwcmltZW5nL2R5bmFtaWNkaWFsb2cnO1xyXG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS1jb21wb25lbnQvYmFzZS1jb21wb25lbnQuY29tcG9uZW50JztcclxuaW1wb3J0IHsgRm9ybUdyb3VwIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBCYXNlU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2Jhc2ljLnNlcnZpY2UnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdhcHAtb3JnLXNlbGVjdG9yLWRpYWxvZycsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL29yZy1zZWxlY3Rvci1kaWFsb2cuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL29yZy1zZWxlY3Rvci1kaWFsb2cuY29tcG9uZW50LnNjc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgT3JnU2VsZWN0b3JEaWFsb2dDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcclxuICBmb3JtQ29uZmlnID0ge1xyXG4gICAgaWQ6IFsnJ10sXHJcbiAgICBjb2RlOiBbJyddLFxyXG4gICAgbmFtZTogWycnXSxcclxuICB9O1xyXG4gIGRhdGFUYWJsZTogYW55ID0ge307XHJcbiAgc2VsZWN0ZWRPcmcgPSBudWxsO1xyXG4gIGZvcm1TZWFyY2g6IEZvcm1Hcm91cDtcclxuICBvcmdTZXJ2aWNlOiBCYXNlU2VydmljZTtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgX2luamVjdG9yOiBJbmplY3RvcixcclxuICAgIHB1YmxpYyBkaWFsb2dTZXJ2aWNlOiBEaWFsb2dTZXJ2aWNlLFxyXG4gICAgcHVibGljIHRyYW5zbGF0ZTogTDEwblRyYW5zbGF0aW9uU2VydmljZSxcclxuICAgIC8vIHB1YmxpYyBvcmdTZXJ2aWNlOiBPcmdhbml6YXRpb25TZXJ2aWNlLFxyXG4gICAgcHVibGljIGR5bmFtaWNEaWFsb2dSZWY6IER5bmFtaWNEaWFsb2dSZWYsXHJcbiAgICBwdWJsaWMgY29uZmlnOiBEeW5hbWljRGlhbG9nQ29uZmlnLFxyXG4gICkge1xyXG4gICAgc3VwZXIoX2luamVjdG9yKTtcclxuICAgIHRoaXMuZm9ybVNlYXJjaCA9IHRoaXMuYnVpbGRGb3JtKHt9LCB0aGlzLmZvcm1Db25maWcpO1xyXG4gICAgdGhpcy5vcmdTZXJ2aWNlID0gdGhpcy5jb25maWcuZGF0YT8ub3JnU2VydmljZTtcclxuICAgIHRoaXMuZG9TZWFyY2hPcmcoKTtcclxuICB9XHJcblxyXG4gIGRvU2VhcmNoT3JnKGV2ZW50PzogYW55KSB7XHJcbiAgICBpZiAoIWV2ZW50KSB7XHJcbiAgICAgIGV2ZW50ID0geyByb3dzOiAxMCwgcmVzZXRUYWJsZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG4gICAgdGhpcy5vcmdTZXJ2aWNlLnNlYXJjaCh0aGlzLmZvcm1TZWFyY2gudmFsdWUsIGV2ZW50KVxyXG4gICAgICAuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgIHRoaXMuZGF0YVRhYmxlID0gcmVzPy5kYXRhIHx8IFtdO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIG9uUm93U2VsZWN0KGV2ZW50OiBhbnkpIHtcclxuICAgIGlmICghIWV2ZW50LmRhdGEpIHtcclxuICAgICAgdGhpcy5keW5hbWljRGlhbG9nUmVmLmNsb3NlKGV2ZW50LmRhdGEpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25TZWxlY3ROb2RlKGV2ZW50OiBhbnkpIHtcclxuICAgIGNvbnNvbGUubG9nKCcgPj4+IG9uU2VsZWN0Tm9kZScsIGV2ZW50KVxyXG4gICAgdGhpcy5mWydpZCddLnNldFZhbHVlKGV2ZW50LmtleSk7XHJcbiAgICB0aGlzLmRvU2VhcmNoT3JnKCk7XHJcbiAgfVxyXG5cclxuICBnZXQgZigpIHtcclxuICAgIHJldHVybiB0aGlzLmZvcm1TZWFyY2guY29udHJvbHM7XHJcbiAgfVxyXG59XHJcbiIsIjxkaXYgY2xhc3M9XCJncmlkXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwibWQ6Y29sLTQgY29sLTEyXCI+XHJcbiAgICAgICAgPHAtcGFuZWw+XHJcbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBwVGVtcGxhdGU9XCJoZWFkZXJcIiBjbGFzcz1cImJsb2NrXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiBmbGV4LXdyYXBcIj5cclxuICAgICAgICAgICAgICAgICAgICA8YiBjbGFzcz1cImZsZXggYWxpZ24taXRlbXMtY2VudGVyXCI+e3sgJ21uZ09yZ2FuaXphdGlvbi5vcmdhbml6YXRpb24udHJlZVRpdGxlJyB8IHRyYW5zbGF0ZUFzeW5jXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19PC9iPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XHJcbiAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICA8YXBwLW9yZy10cmVlIChvblNlbGVjdE5vZGUpPVwib25TZWxlY3ROb2RlKCRldmVudClcIiBbb3JnU2VydmljZV09XCJvcmdTZXJ2aWNlXCIvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L3AtcGFuZWw+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJtZDpjb2wtOCBjb2wtMTJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZFwiPlxyXG4gICAgICAgICAgICA8YXBwLXRleHQtaW5wdXQgY2xhc3M9XCJtci0zIG1kOmNvbC04IGNvbC0xMlwiIFtwbGFjZWhvbGRlcl09XCInxJDGoW4gduG7iydcIiBbcHJvcGVydHldPVwiZlsnbmFtZSddXCI+PC9hcHAtdGV4dC1pbnB1dD5cclxuICAgICAgICAgICAgPHAtYnV0dG9uIGljb249XCJwaSBwaS1zZWFyY2hcIiBjbGFzcz1cIm1kOmNvbC0zIGNvbC0xMlwiIFtsYWJlbF09XCInY29tbW9uLmxhYmVsLnNlYXJjaCcgfCB0cmFuc2xhdGVBc3luY1wiIChvbkNsaWNrKT1cImRvU2VhcmNoT3JnKClcIj48L3AtYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgIDxwLXRhYmxlIFt2YWx1ZV09XCJkYXRhVGFibGU/LmRhdGFcIiBbcGFnaW5hdG9yXT1cImRhdGFUYWJsZT8uZGF0YSAmJiBkYXRhVGFibGU/LmRhdGE/Lmxlbmd0aFwiIFtyb3dzXT1cIjEwXCJcclxuICAgICAgICAgICAgICAgIHN0eWxlQ2xhc3M9XCJwLWRhdGF0YWJsZS1zbVwiIFtsYXp5XT1cInRydWVcIiBbdG90YWxSZWNvcmRzXT1cImRhdGFUYWJsZT8ucmVjb3Jkc1RvdGFsXCJcclxuICAgICAgICAgICAgICAgIChvbkxhenlMb2FkKT1cImRvU2VhcmNoT3JnKCRldmVudClcIlxyXG4gICAgICAgICAgICAgICAgW3Nob3dDdXJyZW50UGFnZVJlcG9ydF09XCJ0cnVlXCJcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbk1vZGU9XCJzaW5nbGVcIlxyXG4gICAgICAgICAgICAgICAgKG9uUm93U2VsZWN0KT1cIm9uUm93U2VsZWN0KCRldmVudClcIlxyXG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2VSZXBvcnRUZW1wbGF0ZT1cIlTDrG0gdGjhuqV5IHt0b3RhbFJlY29yZHN9IGvhur90IHF14bqjLCBoaeG7g24gdGjhu4sgdOG7qyB7Zmlyc3R9IC0ge2xhc3R9XCI+XHJcbiAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgcFRlbXBsYXRlPVwiaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9XCJ3aWR0aDogNSU7XCI+U1RUPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPVwid2lkdGg6IDE1JVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgJ21uZ09yZ2FuaXphdGlvbi5vcmdhbml6YXRpb24uY29kZScgfCB0cmFuc2xhdGVBc3luYyB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9XCJ3aWR0aDogMzAlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eyAnbW5nT3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbi5uYW1lJyB8IHRyYW5zbGF0ZUFzeW5jIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT1cIndpZHRoOiAyMCVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7ICdtbmdPcmdhbml6YXRpb24ub3JnYW5pemF0aW9uLmVzdGFibGlzaERhdGUnIHwgdHJhbnNsYXRlQXN5bmMgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cclxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBwVGVtcGxhdGU9XCJib2R5XCIgbGV0LWl0ZW0gbGV0LWluZGV4PVwicm93SW5kZXhcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dHIgW3BTZWxlY3RhYmxlUm93XT1cIml0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxzcGFuIGNsYXNzPVwicC1jb2x1bW4tdGl0bGVcIj5TVFQ8L3NwYW4+e3sgaW5kZXggKyAxIH19PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxzcGFuIGNsYXNzPVwicC1jb2x1bW4tdGl0bGVcIj57eyAnbW5nT3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbi5jb2RlJyB8IHRyYW5zbGF0ZUFzeW5jIH19PC9zcGFuPnt7IGl0ZW0uY29kZSB9fTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48c3BhbiBjbGFzcz1cInAtY29sdW1uLXRpdGxlXCI+e3sgJ21uZ09yZ2FuaXphdGlvbi5vcmdhbml6YXRpb24ubmFtZScgfCB0cmFuc2xhdGVBc3luYyB9fTwvc3Bhbj57eyBpdGVtLm5hbWUgfX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PHNwYW4gY2xhc3M9XCJwLWNvbHVtbi10aXRsZVwiPnt7ICdtbmdPcmdhbml6YXRpb24ub3JnYW5pemF0aW9uLmVzdGFibGlzaERhdGUnIHwgdHJhbnNsYXRlQXN5bmMgfX08L3NwYW4+e3sgaXRlbS5lc3RhYmxpc2hEYXRlIHwgZGF0ZTonZGQvTU0veXl5eScgfX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxyXG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIHBUZW1wbGF0ZT1cImVtcHR5bWVzc2FnZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49XCI2XCI+e3sgJ2NvbW1vbi50YWJsZS5kYXRhTm90Rm91bmQnIHwgdHJhbnNsYXRlQXN5bmMgfX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxyXG4gICAgICAgICAgICA8L3AtdGFibGU+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+Il19